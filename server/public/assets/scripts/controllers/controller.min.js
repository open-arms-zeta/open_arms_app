/*! angular_factory_lecture 2015-12-16 */
myApp.controller("AddClientController",["$scope","DataService","$http",function(a,b,c){console.log("Add client Controller Online"),a.dataService=b,a.categories=void 0,a.newClient={},void 0==a.categories?a.dataService.retrieveCategories().then(function(){a.categories=a.dataService.getCategories(),console.log(a.categories)}):a.categories=a.dataService.getCategories(),a.associateCategoryID=function(){console.log(a.categories)},a.submit=function(){console.log(a.newClient),a.newClient.password=a.newClient.phone.toString(),c.post("/register",a.newClient).then(function(a){console.log(a.data)})},console.log(a.categories)}]),myApp.controller("AdminWelcomeController",["$scope","DataService","$http",function(a,b,c){console.log("AdminWelcome Controller Online"),a.dataService=b,a.activeWeek=void 0,a.selectedStartDate=void 0,a.selectedEndDate=void 0,a.selectedMealCount=void 0,a.clientOrders=void 0,a.initSelectedWeek=function(){a.selectedStartDate=a.activeWeek;var b=new Date(a.selectedStartDate);a.selectedEndDate=b.setDate(b.getDate()+6)},a.moveSelectedWeek=function(b){var c=new Date(a.selectedStartDate);a.selectedStartDate=c.setDate(c.getDate()+b);var d=new Date(a.selectedEndDate);a.selectedEndDate=d.setDate(d.getDate()+b)},a.previousWeek=function(){a.moveSelectedWeek(-7),a.getMealCount()},a.nextWeek=function(){a.moveSelectedWeek(7),a.getMealCount()},a.getMealCount=function(){var b=new Date(a.selectedStartDate),d=new Date(a.selectedEndDate);c.get("/getmealcount",{params:{startDate:b,endDate:d}}).then(function(b){console.log(b.data),a.selectedMealCount=b.data})},a.getClientOrders=function(){var b=new Date(a.selectedStartDate),c=new Date(a.selectedEndDate);a.dataService.retrieveClientOrders(b,c).then(function(){a.clientOrders=a.dataService.getClientOrders(),console.log(a.clientOrders)})},a.printMealCount=function(){console.log(a.selectedMealCount)},a.printClientOrders=function(){a.getClientOrders()},void 0==a.activeWeek?(a.dataService.calculateActiveWeek(),a.activeWeek=a.dataService.getActiveWeek()):a.activeWeek=a.dataService.getActiveWeek(),a.initSelectedWeek(),a.getMealCount()}]),myApp.controller("CalculateMealsController",["$scope","DataService","$http",function(a,b,c){console.log("calculate meals Controller Online"),a.dataService=b,a.clientOrders=a.dataService.getClientOrders(),a.activeWeek=void 0,a.menu=void 0,a.categories=a.dataService.getCategories(),a.displayResults=!1,a.meal={},a.mealCount=[],void 0==a.categories?a.dataService.retrieveCategories().then(function(){a.categories=a.dataService.getCategories()}):a.categories=a.dataService.getCategories(),void 0==a.activeWeek?(a.dataService.calculateActiveWeek(),a.activeWeek=a.dataService.getActiveWeek()):a.activeWeek=a.dataService.getActiveWeek(),void 0==a.menu?a.dataService.retrieveMenuByWeek("2015-12-05","2015-12-11").then(function(){a.menu=a.dataService.getMenu()}):a.menu=a.dataService.getMenu(),void 0==a.clientOrders?a.dataService.retrieveClientOrders("2015-12-05","2015-12-11").then(function(){a.clientOrders=a.dataService.getClientOrders()}):a.clientOrders=a.dataService.getClientOrders(),a.calculateMeals=function(){for(var b=0;b<a.menu.length;b++){console.log(a.menu[b]);var c=_.where(a.categories,{category_name:a.menu[b].category_name})[0];a.menu[b].count=c.formCount||0;var d=_.where(a.clientOrders,{entree:a.menu[b].entree});if(d.length>0){var e=_.pluck(d,"count").reduce(function(a,b){return a+b});console.log(e),a.menu[b].count+=e}}console.log(a.menu),a.displayResults=!0}}]),myApp.controller("ClientWelcomeController",["$scope","DataService","$http",function(a,b,c){console.log("Client Welcome Controller Online"),a.dataService=b,a.user=void 0,a.activeWeek=void 0,a.menu=void 0,a.mealsChosen=!1,a.customized=!1,void 0==a.user?a.dataService.retrieveUser().then(function(){a.user=a.dataService.getUser()}):a.user=a.dataService.getUser(),void 0==a.activeWeek?(a.dataService.calculateActiveWeek(),a.activeWeek=a.dataService.getActiveWeek()):a.activeWeek=a.dataService.getActiveWeek(),void 0==a.menu?a.dataService.retrieveMenuByWeek("2015-12-05","2015-12-05").then(function(){a.menu=a.dataService.getMenu(),console.log(a.menu)}):a.menu=a.dataService.getMenu(),a.customize=function(){a.customized=!0},a.completeOrder=function(){a.mealsChosen=!0}}]),myApp.controller("CreateMealController",["$scope","DataService",function(a,b){console.log("create meal Controller Online")}]),myApp.controller("CreateMenuController",["$scope","DataService",function(a,b){console.log("create menu Controller Online")}]),myApp.controller("SearchClientController",["$scope","DataService","$http",function(a,b,c){console.log("search client Controller Online"),a.clientData=void 0,a.search="",a.retrieveAll=function(){c.get("/searchclients/all").then(function(b){console.log(b.data),a.clientData=b.data})},a.getSearchResults=function(){0==a.search.length?a.retrieveAll():(console.log(a.search),c.get("/searchclients",{params:{name:a.search}}).then(function(b){console.log(b.data),a.clientData=b.data}),a.search="")},a.gridOptions={data:"clientData",enableSorting:!0,columnDefs:[{field:"first_name",displayName:"First Name",enableCellEdit:!1},{field:"last_name",displayName:"Last Name",enableCellEdit:!1},{field:"email",displayName:"Email Address",enableCellEdit:!1},{field:"phone",displayName:"Phone Number",enableCellEdit:!1},{field:"default_meal",displayName:"Default Pack",enableCellEdit:!1},{field:"status",displayName:"Active Status",type:"boolean",cellTemplate:'<div ng-show="row.entity.status"><input type="checkbox" ng-model="row.entity.status"> Active</div><div ng-hide="row.entity.status"><input type="checkbox" ng-model="row.entity.status"> Inactive</div>',editableCellTemplate:'<div ng-show="row.entity.status"><input type="checkbox" ng-model="row.entity.status"> Active</div><div ng-hide="row.entity.status"><input type="checkbox" ng-model="row.entity.status"> Inactive</div>'}]},a.updateOrders=function(){console.log(a.clientData)},a.retrieveAll()}]),myApp.controller("ViewMealController",["$scope","DataService",function(a,b){console.log("view meal Controller Online")}]),myApp.controller("ViewMenuController",["$scope","DataService",function(a,b){console.log("view menu Controller Online")}]);