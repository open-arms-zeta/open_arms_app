/*! angular_factory_lecture 2015-12-15 */
myApp.controller("AddClientController",["$scope","DataService",function(a,b){console.log("Add client Controller Online")}]),myApp.controller("AdminWelcomeController",["$scope","DataService",function(a,b){console.log("AdminWelcome Controller Online")}]),myApp.controller("CalculateMealsController",["$scope","DataService","$http",function(a,b,c){console.log("calculate meals Controller Online"),a.dataService=b,a.clientOrders=a.dataService.getClientOrders(),a.activeWeek=void 0,a.menu=void 0,a.categories=a.dataService.getCategories(),a.displayResults=!1,a.meal={},a.mealCount=[],void 0==a.categories?a.dataService.retrieveCategories().then(function(){a.categories=a.dataService.getCategories()}):a.categories=a.dataService.getCategories(),void 0==a.activeWeek?(a.dataService.calculateActiveWeek(),a.activeWeek=a.dataService.getActiveWeek()):a.activeWeek=a.dataService.getActiveWeek(),void 0==a.menu?a.dataService.retrieveMenuByWeek("2015-12-05","2015-12-05").then(function(){a.menu=a.dataService.getMenu()}):a.menu=a.dataService.getMenu(),void 0==a.clientOrders?a.dataService.retrieveClientOrders("2015-12-05","2015-12-05").then(function(){a.clientOrders=a.dataService.getClientOrders()}):a.clientOrders=a.dataService.getClientOrders(),a.calculateMeals=function(){for(var b=0;b<a.menu.length;b++){console.log(a.menu[b]);var c=_.where(a.categories,{category_name:a.menu[b].category_name})[0];a.menu[b].count=c.formCount||0;var d=_.where(a.clientOrders,{entree:a.menu[b].entree});if(d.length>0){var e=_.pluck(d,"count").reduce(function(a,b){return a+b});console.log(e),a.menu[b].count+=e}}console.log(a.menu),a.displayResults=!0}}]),myApp.controller("CreateMealController",["$scope","$http","DataService",function(a,b,c){console.log("create meal Controller Online"),a.meal={categories:[],allergens:[]},a.mealCategories=function(){b({method:"GET",url:"/getcategories"}).then(function(b){console.log("categories",b.data),a.categories=b.data})},a.mealCategories(),a.mealAllergens=function(){b({method:"GET",url:"/getallergens"}).then(function(b){console.log("allergy",b.data),a.allergens=b.data})},a.mealAllergens(),a.submit=function(b){console.log("submitr",b),console.log("here is the meal",a.meal),console.log(a.mealtype),console.log(a.allergy),console.log(a.meal)},a.findAllergen=function(b){var c=_.pluck(a.meal.allergens,"allergen_name");return _.contains(c,b)},a.associate=function(b,c){var d=_.findLastIndex(a.meal.allergens,{allergen_name:b});a.meal.allergens[d].specific=c}}]),myApp.controller("CreateMenuController",["$scope","DataService",function(a,b){console.log("create menu Controller Online")}]),myApp.controller("SearchClientController",["$scope","DataService",function(a,b){console.log("search client Controller Online")}]),myApp.controller("ViewMealController",["$scope","DataService",function(a,b){console.log("view meal Controller Online")}]),myApp.controller("ViewMenuController",["$scope","DataService",function(a,b){console.log("view menu Controller Online")}]);